<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>VR-Play</title>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
    <script
        src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.0.1/dist/aframe-extras.min.js"></script>
    <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="sounds.js" type="text/javascript"></script>
    <script>

        var current_page = 0;
        var records_per_page = 5;

        var objJson = [
            { adName: "AdName 1" },
            { adName: "AdName 2" },
            { adName: "AdName 3" },
            { adName: "AdName 4" },
            { adName: "AdName 5" },
            { adName: "AdName 6" },
            { adName: "AdName 7" },
            { adName: "AdName 8" },
            { adName: "AdName 9" }
        ]; // Can be obtained from another source, such as your objJson variable

        function prevPage() {
            if (current_page > 1) {
                current_page--;
                changePage(current_page);
            }
        }

        function nextPage() {
            if (current_page < numPages()) {
                current_page++;
                changePage(current_page);
            }
        }

        function changePage(page) {
            var btn_next = document.getElementById("next-page");
            var btn_prev = document.getElementById("previous-page");
            var element1 = document.getElementById("label1");
            var element2 = document.getElementById("label2");
            var element3 = document.getElementById("label3");
            var element4 = document.getElementById("label4");
            var element5 = document.getElementById("label5");
            //var page_span = document.getElementById("page");

            // Validate page
            if (page < 1) page = 1;
            if (page > numPages()) page = numPages();

            element4.setAttribute("visible", false);
            element5.setAttribute("visible", false);
            element3.setAttribute("visible", false);
            element2.setAttribute("visible", false);
            element1.setAttribute("visible", false);

            for (
                var i = (page - 1) * records_per_page;
                i < page * records_per_page && i < window.PROGRAM.length;
                i++
            ) {
                if (window.PROGRAM[i].type == "move") {
                    elementno = i + 1 - (page - 1) * records_per_page;
                    if (elementno == 5) {
                        element5.setAttribute("value", 'Move (' + window.PROGRAM[i].x + ',' + window.PROGRAM[i].y + ',' + window.PROGRAM[i].z + ')');
                        element5.setAttribute("visible", true);
                    } else if (elementno == 4) {
                        element4.setAttribute("value", 'Move (' + window.PROGRAM[i].x + ',' + window.PROGRAM[i].y + ',' + window.PROGRAM[i].z + ')');
                        element4.setAttribute("visible", true);
                    } else if (elementno == 3) {
                        element3.setAttribute("value", 'Move (' + window.PROGRAM[i].x + ',' + window.PROGRAM[i].y + ',' + window.PROGRAM[i].z + ')');
                        element3.setAttribute("visible", true);
                    } else if (elementno == 2) {
                        element2.setAttribute("value", 'Move (' + window.PROGRAM[i].x + ',' + window.PROGRAM[i].y + ',' + window.PROGRAM[i].z + ')');
                        element2.setAttribute("visible", true);
                    } else if (elementno == 1) {
                        element1.setAttribute("value", 'Move (' + window.PROGRAM[i].x + ',' + window.PROGRAM[i].y + ',' + window.PROGRAM[i].z + ')');
                        element1.setAttribute("visible", true);
                    }
                }
                if (window.PROGRAM[i].type == "rotate") {
                    elementno = i + 1 - (page - 1) * records_per_page;
                    if (elementno == 5) {
                        element5.setAttribute("value", 'Rotate (' + window.PROGRAM[i].x + ',' + window.PROGRAM[i].y + ',' + window.PROGRAM[i].z + ')');
                        element5.setAttribute("visible", true);
                    } else if (elementno == 4) {
                        element4.setAttribute("value", 'Rotate (' + window.PROGRAM[i].x + ',' + window.PROGRAM[i].y + ',' + window.PROGRAM[i].z + ')');
                        element4.setAttribute("visible", true);
                    } else if (elementno == 3) {
                        element3.setAttribute("value", 'Rotate (' + window.PROGRAM[i].x + ',' + window.PROGRAM[i].y + ',' + window.PROGRAM[i].z + ')');
                        element3.setAttribute("visible", true);
                    } else if (elementno == 2) {
                        element2.setAttribute("value", 'Rotate (' + window.PROGRAM[i].x + ',' + window.PROGRAM[i].y + ',' + window.PROGRAM[i].z + ')');
                        element2.setAttribute("visible", true);
                    } else if (elementno == 1) {
                        element1.setAttribute("value", 'Rotate (' + window.PROGRAM[i].x + ',' + window.PROGRAM[i].y + ',' + window.PROGRAM[i].z + ')');
                        element1.setAttribute("visible", true);
                    }
                }
                if (window.PROGRAM[i].type == "scale") {
                    elementno = i + 1 - (page - 1) * records_per_page;
                    if (elementno == 5) {
                        element5.setAttribute("value", 'Scale (' + window.PROGRAM[i].x + ',' + window.PROGRAM[i].y + ',' + window.PROGRAM[i].z + ')');
                        element5.setAttribute("visible", true);
                    } else if (elementno == 4) {
                        element4.setAttribute("value", 'Scale (' + window.PROGRAM[i].x + ',' + window.PROGRAM[i].y + ',' + window.PROGRAM[i].z + ')');
                        element4.setAttribute("visible", true);
                    } else if (elementno == 3) {
                        element3.setAttribute("value", 'Scale (' + window.PROGRAM[i].x + ',' + window.PROGRAM[i].y + ',' + window.PROGRAM[i].z + ')');
                        element3.setAttribute("visible", true);
                    } else if (elementno == 2) {
                        element2.setAttribute("value", 'Scale (' + window.PROGRAM[i].x + ',' + window.PROGRAM[i].y + ',' + window.PROGRAM[i].z + ')');
                        element2.setAttribute("visible", true);
                    } else if (elementno == 1) {
                        element1.setAttribute("value", 'Scale (' + window.PROGRAM[i].x + ',' + window.PROGRAM[i].y + ',' + window.PROGRAM[i].z + ')');
                        element1.setAttribute("visible", true);
                    }
                }
                if (window.PROGRAM[i].type == "loop") {
                    elementno = i + 1 - (page - 1) * records_per_page;
                    if (elementno == 5) {
                        element5.setAttribute("value", 'Loop ' + window.PROGRAM[i].times + ' times');
                        element5.setAttribute("visible", true);
                    } else if (elementno == 4) {
                        element4.setAttribute("value", 'Loop ' + window.PROGRAM[i].times + ' times');
                        element4.setAttribute("visible", true);
                    } else if (elementno == 3) {
                        element3.setAttribute("value", 'Loop ' + window.PROGRAM[i].times + ' times');
                        element3.setAttribute("visible", true);
                    } else if (elementno == 2) {
                        element2.setAttribute("value", 'Loop ' + window.PROGRAM[i].times + ' times');
                        element2.setAttribute("visible", true);
                    } else if (elementno == 1) {
                        element1.setAttribute("value", 'Loop ' + window.PROGRAM[i].times + ' times');
                        element1.setAttribute("visible", true);
                    }
                }
                if (window.PROGRAM[i].type == "endloop") {
                    elementno = i + 1 - (page - 1) * records_per_page;
                    if (elementno == 5) {
                        element5.setAttribute("value", window.PROGRAM[i].type);
                        element5.setAttribute("visible", true);
                    } else if (elementno == 4) {
                        element4.setAttribute("value", window.PROGRAM[i].type);
                        element4.setAttribute("visible", true);
                    } else if (elementno == 3) {
                        element3.setAttribute("value", window.PROGRAM[i].type);
                        element3.setAttribute("visible", true);
                    } else if (elementno == 2) {
                        element2.setAttribute("value", window.PROGRAM[i].type);
                        element2.setAttribute("visible", true);
                    } else if (elementno == 1) {
                        element1.setAttribute("value", window.PROGRAM[i].type);
                        element1.setAttribute("visible", true);
                    }
                }
                if (window.PROGRAM[i].type == "sleep") {
                    elementno = i + 1 - (page - 1) * records_per_page;
                    if (elementno == 5) {
                        element5.setAttribute("value", window.PROGRAM[i].type);
                        element5.setAttribute("visible", true);
                    } else if (elementno == 4) {
                        element4.setAttribute("value", window.PROGRAM[i].type);
                        element4.setAttribute("visible", true);
                    } else if (elementno == 3) {
                        element3.setAttribute("value", window.PROGRAM[i].type);
                        element3.setAttribute("visible", true);
                    } else if (elementno == 2) {
                        element2.setAttribute("value", window.PROGRAM[i].type);
                        element2.setAttribute("visible", true);
                    } else if (elementno == 1) {
                        element1.setAttribute("value", window.PROGRAM[i].type);
                        element1.setAttribute("visible", true);
                    }
                }
                if (window.PROGRAM[i].type == "sound") {
                    elementno = i + 1 - (page - 1) * records_per_page;
                    if (elementno == 5) {
                        element5.setAttribute("value", window.PROGRAM[i].type);
                        element5.setAttribute("visible", true);
                    } else if (elementno == 4) {
                        element4.setAttribute("value", window.PROGRAM[i].type);
                        element4.setAttribute("visible", true);
                    } else if (elementno == 3) {
                        element3.setAttribute("value", window.PROGRAM[i].type);
                        element3.setAttribute("visible", true);
                    } else if (elementno == 2) {
                        element2.setAttribute("value", window.PROGRAM[i].type);
                        element2.setAttribute("visible", true);
                    } else if (elementno == 1) {
                        element1.setAttribute("value", window.PROGRAM[i].type);
                        element1.setAttribute("visible", true);
                    }
                }
                if (window.PROGRAM[i].type == "talk") {
                    elementno = i + 1 - (page - 1) * records_per_page;
                    if (elementno == 5) {
                        element5.setAttribute("value", window.PROGRAM[i].type);
                        element5.setAttribute("visible", true);
                    } else if (elementno == 4) {
                        element4.setAttribute("value", window.PROGRAM[i].type);
                        element4.setAttribute("visible", true);
                    } else if (elementno == 3) {
                        element3.setAttribute("value", window.PROGRAM[i].type);
                        element3.setAttribute("visible", true);
                    } else if (elementno == 2) {
                        element2.setAttribute("value", window.PROGRAM[i].type);
                        element2.setAttribute("visible", true);
                    } else if (elementno == 1) {
                        element1.setAttribute("value", window.PROGRAM[i].type);
                        element1.setAttribute("visible", true);
                    }
                }
                if (window.PROGRAM[i].type == "change score") {
                    elementno = i + 1 - (page - 1) * records_per_page;
                    if (elementno == 5) {
                        element5.setAttribute("value", window.PROGRAM[i].type);
                        element5.setAttribute("visible", true);
                    } else if (elementno == 4) {
                        element4.setAttribute("value", window.PROGRAM[i].type);
                        element4.setAttribute("visible", true);
                    } else if (elementno == 3) {
                        element3.setAttribute("value", window.PROGRAM[i].type);
                        element3.setAttribute("visible", true);
                    } else if (elementno == 2) {
                        element2.setAttribute("value", window.PROGRAM[i].type);
                        element2.setAttribute("visible", true);
                    } else if (elementno == 1) {
                        element1.setAttribute("value", window.PROGRAM[i].type);
                        element1.setAttribute("visible", true);
                    }
                }
            }
            //page_span.innerHTML = page;
            console.log("Page current" + page);

            if (page == 1) {
                btn_prev.setAttribute("visible", "false");
            } else {
                btn_prev.setAttribute("visible", "true");
            }

            if (page == numPages()) {
                btn_next.setAttribute("visible", "false");
            } else {
                btn_next.setAttribute("visible", "true");
            }
        }

        function numPages() {
            return Math.ceil(window.PROGRAM.length / records_per_page);
        }

        function numPagesFirstRun() {
            current_page = Math.ceil(window.PROGRAM.length / records_per_page);
            return current_page;
        }

        window.onload = function () {
            changePage(numPagesFirstRun());
        };




        function increaseStepCount(t) {
            var label;
            switch (t) {
                case 'x':
                    label = document.getElementById("steps-labelX");
                    break;
                case 'y':
                    label = document.getElementById("steps-labelY");
                    break;
                case 'z':
                    label = document.getElementById("steps-labelZ");
                    break;
            }
            var currval = parseInt(label.getAttribute("value"), 10);
            var val = currval + 1;
            val = val.toString();
            label.setAttribute("value", val);
            return true;
        }

        function decreaseStepCount(t) {
            var yes = false;
            var label;
            switch (t) {
                case 'x':
                    label = document.getElementById("steps-labelX");
                    break;
                case 'y':
                    label = document.getElementById("steps-labelY");
                    break;
                case 'z':
                    label = document.getElementById("steps-labelZ");
                    break;
            }
            //var label = document.getElementById("steps-label");
            var currval = parseInt(label.getAttribute("value"), 10);
            var val = 0;
            if (currval > 0) {
                val = currval - 1;
                yes = true;
            }
            val = val.toString();
            label.setAttribute("value", val);
            return yes;
        }

        function increaseLoopCount() {
            var label = document.getElementById("loop-label");
            var currval = parseInt(label.getAttribute("value"), 10);
            var val = currval + 1;
            val = val.toString();
            label.setAttribute("value", val);
        }

        function decreaseLoopCount() {
            var label = document.getElementById("loop-label");
            var currval = parseInt(label.getAttribute("value"), 10);
            var val = 0;
            if (currval > 0) {
                val = currval - 1;
            }
            val = val.toString();
            label.setAttribute("value", val);
        }

        function callDialog(type) {
            window.DIALOG_TYPE = type;
            storeState("#fox");
            document.getElementById("steps-labelX").setAttribute('value', 0);
            document.getElementById("steps-labelY").setAttribute('value', 0);
            document.getElementById("steps-labelZ").setAttribute('value', 0);
            showStepDialog();
        }

        function DoneStepDialog() {
            type = window.DIALOG_TYPE;
            var el = document.querySelector("#fox");
            x = parseFloat(document.getElementById("steps-labelX").getAttribute('value'));
            y = parseFloat(document.getElementById("steps-labelY").getAttribute('value'));
            z = parseFloat(document.getElementById("steps-labelZ").getAttribute('value'));
            //document.getElementById("steps-labelY").setAttribute('value', 0);
            //document.getElementById("steps-labelZ").setAttribute('value', 0);)
            //var positionX, positionY, positionZ, rotateX, rotateY, rotateZ, scaleX, scaleY, scaleZ;
            //[positionX, positionY, positonZ] = el.getAttribute("position")
            //[rotateX, rotateY, rotateZ] = el.getAttribute("rotation")
            //[scaleX, scaleY, scaleZ] = el.getAttribute("scale")
            //positionX = el.getAttribute("position").x;
            //positionY = el.getAttribute("position").y;
            //positionZ = el.getAttribute("position").z;
            //rotateX = el.getAttribute("rotation").x;
            //rotateY = el.getAttribute("rotation").y;
            //rotateZ = el.getAttribute("rotation").z;
            //scaleX = el.getAttribute("scale").x;
            //scaleY = el.getAttribute("scale").y;
            //scaleZ = el.getAttribute("scale").z;
            switch (type) {
                case "move":
                    window.PROGRAM.push(MoveAnimation(x, y, z));
                    break;
                case "rotation":
                    window.PROGRAM.push(RotateAnimation(x, y, z));
                    break;
                case "scale":
                    window.PROGRAM.push(ScaleAnimation(x, y, z));
                    break;
            }
            /*switch (type) {
              case "move":
                window.PROGRAM.push(MoveAnimation(positionX, positionY, positionZ));
                break;
              case "rotation":
                window.PROGRAM.push(RotateAnimation(rotateX, rotateY, rotateZ));
                break;
              case "scale":
                window.PROGRAM.push(ScaleAnimation(scaleX, scaleY, scaleZ));
                break;
            }*/
            hideStepDialog()
            changePage(numPagesFirstRun());
        }

        function discardDialog() {
            hideLoopCountDialog(); position
            hideStepDialog();
            restoreState();
        }

        function showStepDialog() {
            document.querySelectorAll(".number-of-steps").forEach(function (e) { e.setAttribute("visible", true) });
            document.querySelector("#countokbutton").setAttribute("visible", true);

        }
        function hideStepDialog() {
            document.querySelectorAll(".number-of-steps").forEach(function (e) { e.setAttribute("visible", false) });
            document.querySelector("#countokbutton").setAttribute("visible", false);
        }
        function showLoopCountDialog() {
            document.querySelector("#loop-times").setAttribute("visible", true);
            document.querySelector("#loopokbutton").setAttribute("visible", true);
        }

        function submitLoopCountDialog() {
            hideLoopCountDialog();
            window.PROGRAM.push(AddLoop(parseInt(document.querySelector("#loop-label").getAttribute('value'))));
            changePage(numPagesFirstRun());
        }

        function hideLoopCountDialog() {
            console.log("clicked");
            var label = document.getElementById("loop-label");
            AddLoop(parseInt(label.getAttribute('value')));
            document.querySelector("#loop-times").setAttribute("visible", false);
            document.querySelector("#loopokbutton").setAttribute("visible", false);
        }

        function decreaseStep(t) {
            type = window.DIALOG_TYPE;
            var el = document.querySelector("#fox");
            if (decreaseStepCount(t)) {
                switch (type) {
                    case "move":
                        if (t == 'x')
                            el.object3D.position.x -= 0.1;
                        if (t == 'y')
                            el.object3D.position.y -= 0.1;
                        if (t == 'z')
                            el.object3D.position.z -= 0.1;
                        break;
                    case "rotation":
                        if (t == 'x')
                            el.object3D.rotation.x -= 0.05;
                        if (t == 'y')
                            el.object3D.rotation.y -= 0.05;
                        if (t == 'z')
                            el.object3D.rotation.z -= 0.05;
                        break;
                    case "scale":
                        if (t == 'x')
                            el.object3D.scale.x -= 0.1;
                        if (t == 'y')
                            el.object3D.scale.y -= 0.1;
                        if (t == 'z')
                            el.object3D.scale.z -= 0.1;
                        break;
                }
            }
        }
        function increaseStep(t) {
            type = window.DIALOG_TYPE;
            var el = document.querySelector("#fox");
            increaseStepCount(t);
            switch (type) {
                case "move":
                    if (t == 'x')
                        el.object3D.position.x += 0.1;
                    if (t == 'y')
                        el.object3D.position.y += 0.1;
                    if (t == 'z')
                        el.object3D.position.z += 0.1;
                    break;
                case "rotation":
                    if (t == 'x')
                        el.object3D.rotation.x += 0.05;
                    if (t == 'y')
                        el.object3D.rotation.y += 0.05;
                    if (t == 'z')
                        el.object3D.rotation.z += 0.05;
                    break;
                case "scale":
                    if (t == 'x')
                        el.object3D.scale.x += 0.1;
                    if (t == 'y')
                        el.object3D.scale.y += 0.1;
                    if (t == 'z')
                        el.object3D.scale.z += 0.1;
                    break;
            }
        }

        function storeState(q) {
            var el = document.querySelector(q);
            //var positionX, positionY, positionZ, rotateX, rotateY, rotateZ, scaleX, scaleY, scaleZ;
            //[positionX, positionY, positonZ] = el.getAttribute("position")
            //[rotateX, rotateY, rotateZ] = el.getAttribute("rotation")
            //[scaleX, scaleY, scaleZ] = el.getAttribute("scale")
            positionX = el.getAttribute("position").x;
            positionY = el.getAttribute("position").y;
            positionZ = el.getAttribute("position").z;
            rotateX = el.getAttribute("rotation").x;
            rotateY = el.getAttribute("rotation").y;
            rotateZ = el.getAttribute("rotation").z;
            scaleX = el.getAttribute("scale").x;
            scaleY = el.getAttribute("scale").y;
            scaleZ = el.getAttribute("scale").z;
            window.STORED_STATE = {
                "element": el,
                "position": el.getAttribute("position"),
                "positionX": positionX,
                "positionY": positionY,
                "positionZ": positionZ,
                "rotateX": rotateX,
                "rotateY": rotateY,
                "rotateZ": rotateZ,
                "scaleX": scaleX,
                "scaleY": scaleY,
                "scaleZ": scaleZ,
                "rotation": el.getAttribute("rotation"),
                "scale": el.getAttribute("scale")
            };
        }

        function restoreState() {
            var el = window.STORED_STATE.element;
            el.setAttribute("position", o.position);
            el.setAttribute("rotation", o.rotation);
            el.setAttribute("scale", o.scale);
        }






    </script>
    <style type="text/css">
        @font-face {
            font-family: "Ionicons";
            src: url("assets/fonts/ionicons.eot?v=2.0.1");
            src: url("assets/fonts/ionicons.eot?v=2.0.1#iefix") format("embedded-opentype"), url("assets/fonts/ionicons.ttf?v=2.0.1") format("truetype"), url("assets/fonts/ionicons.woff?v=2.0.1") format("woff"), url("assets/fonts/ionicons.svg?v=2.0.1#Ionicons") format("svg");
            font-weight: normal;
            font-style: normal
        }

        body {
            font-family: Ionicons;
        }

        .visuallyhidden {
            position: absolute;
            display: block;
            border: 0;
            clip: rect(0 0 0 0);
            height: 1px;
            width: 1px;
            margin: -1px;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <a-scene id="bestscene"
        inspector="https://cdn.jsdelivr.net/gh/aframevr/aframe-inspector@master/dist/aframe-inspector.min.js">
        <!-- <a-assets>
            <a-asset-item id="crate-obj" src="models/warmachine_civilwar_full.obj"></a-asset-item>
            <a-asset-item id="crate-mtl" src="models/warmachine_civilwar_full.mtl"></a-asset-item>
        </a-assets> -->

        <!-- Using the asset management system. 
        <a-obj-model src="#crate-obj" mtl="#crate-mtl" scale="0.2 0.2 0.2" position="-0.01093 0 -5.79363">
        </a-obj-model>-->
        <a-assets>
            <canvas id="canvasObj" crossorigin="anonymous" webkit-playsinline=""></canvas>
            <a-asset-item id="iconfont" src="assets/fonts/ionicons.ttf"></a-asset-item>
        </a-assets>
        <a-entity id="fox" gltf-model="url(models/Fox.gltf)" scale="0.2 0.2 0.2" position="-0.01093 0 -5.79363"
            class="link">
        </a-entity>></a-entity>
        <a-entity environment="preset:forest"></a-entity>
        <!-- <a-box id="box1" class="link" position="1.89582 0.5 -3" rotation="0 45 0" color="#4CC3D9"
            animation__click="property: position; startEvents: click; to: 5 1.6 0; dur: 1500; easing: linear">
        </a-box>
        <a-box id="box2" class="link" position="-1 8.39885 -31.11631" rotation="0 45 0" color="#4CC3D9"
            animation__click="property: position; startEvents: click; to: 5 1.6 0; dur: 1500; easing: linear">
        </a-box>
        <a-box id="box3" class="link" position="-1 3.5 -14.14786" rotation="0 45 0" color="#4CC3D9"
            animation__click="property: position; startEvents: click; to: 5 1.6 0; dur: 1500; easing: linear">
        </a-box> -->
        <a-gui-flex-container id="leftmenu" scale="1 1 0.867" flex-direction="column" justify-content="center"
            align-items="normal" component-padding="0.01" opacity="0.7" width="3.5" height="6"
            position="-4.35986 3.07522 -4.56663" rotation="0 23.313079726078065 0">
            <a-gui-icon-label-button class="link" id="Loopbtn" width="2.5" height="0.5" onclick="showLoopCountDialog()"
                icon="loop" value="Loop n times" font-family="Arial" margin="0 0 0.05 0">
            </a-gui-icon-label-button>
            <a-gui-icon-label-button class="link" id="EndLoopbtn" width="2.5" height="0.5"
                onclick="window.PROGRAM.push(AddEndLoop());changePage(numPagesFirstRun());" icon="loop" value="Endloop"
                font-family="Arial" margin="0 0 0.05 0">
            </a-gui-icon-label-button>
            <a-gui-icon-label-button id="moveBtn" class="link" width="2.5" height="0.5" onclick="callDialog('move')"
                icon="android-arrow-back" value="Move" font-family="Arial" margin="0 0 0.05 0">
            </a-gui-icon-label-button>
            <a-gui-icon-label-button id="rotateBtn" class="link" width="2.5" height="0.5"
                onclick="callDialog('rotation')" icon="android-arrow-forward" value="Rotate" font-family="Arial"
                margin="0 0 0.05 0">
            </a-gui-icon-label-button>
            <a-gui-icon-label-button id="scaleBtn" class="link" width="2.5" height="0.5" onclick="callDialog('scale')"
                icon="android-arrow-up" value="Scale" font-family="Arial" margin="0 0 0.05 0">
            </a-gui-icon-label-button>
            <a-gui-icon-label-button id="PlaySoundBtn" class="link" width="2.5" height="0.5"
                onclick="window.PROGRAM.push(PlaySound());changePage(numPagesFirstRun());" icon="android-arrow-up"
                value="Play Sound" font-family="Arial" margin="0 0 0.05 0">
            </a-gui-icon-label-button>
            <a-gui-icon-label-button id="DelayBtn" class="link" width="2.5" height="0.5"
                onclick="window.PROGRAM.push(SleepDelay());changePage(numPagesFirstRun());" icon="android-arrow-up"
                value="Sleep/Delay" font-family="Arial" margin="0 0 0.05 0">
            </a-gui-icon-label-button>
            <a-gui-icon-label-button class="link" id="TalkBtn" width="2.5" height="0.5" onclick="showLoopCountDialog()"
                icon="loop" value="Talk" font-family="Arial" margin="0 0 0.05 0">
            </a-gui-icon-label-button>
            <a-gui-icon-label-button class="link" id="ScoreBtn" width="2.5" height="0.5"
                onclick="window.PROGRAM.push(changeVar());changePage(numPagesFirstRun());" icon="loop"
                value="Increase Score" font-family="Arial" margin="0 0 0.05 0">
            </a-gui-icon-label-button>
            <a-gui-icon-label-button id="PlayBtn" class="link" width="2.5" height="0.5" onclick="play"
                icon="android-arrow-up" value="Play" font-family="Arial" margin="0 0 0.05 0">
            </a-gui-icon-label-button>
            <!--
            <a-gui-icon-label-button id="move-down" class="link" width="2.5" height="0.5" onclick="showStepDialog"
                icon="android-arrow-down" value="Move Down" font-family="Arial" margin="0 0 0.05 0">
            </a-gui-icon-label-button>
            <a-gui-icon-label-button id="move-forward" class="link" width="2.5" height="0.5" onclick="showStepDialog"
                icon="close-circled" value="Move Forward" font-family="Arial" margin="0 0 0.05 0">
            </a-gui-icon-label-button>
            <a-gui-icon-label-button id="move-backward" class="link" width="2.5" height="0.5" onclick="showStepDialog"
                icon="disc" value="Move Backward" font-family="Arial" margin="0 0 0.05 0">
            </a-gui-icon-label-button>-->
        </a-gui-flex-container>-
        </a-gui-flex-container>
        <a-gui-flex-container id="page-table" scale="1 1 0.867" flex-direction="column" justify-content="center"
            align-items="normal" component-padding="0.01" opacity="0.7" width="3.5" height="4.5"
            position="3.41136 2.41918 -4.39953" rotation="3.546035794064665 -3.9087180783824764 -0.24236114734033823">
            <a-gui-label id="label1" width="3" height="0.6" value="0" visible="false" font-family="Arial"
                margin="0 0 0.05 0" background-color="#212121" font-color="#FFFFFF">
            </a-gui-label>
            <a-gui-label id="label2" width="3" height="0.6" value="0" visible="false" font-family="Arial"
                margin="0 0 0.05 0" background-color="#212121" font-color="#FFFFFF">
            </a-gui-label>
            <a-gui-label id="label3" visible="false" width="3" height="0.6" value="0" font-family="Arial"
                margin="0 0 0.05 0" background-color="#212121" font-color="#FFFFFF">
            </a-gui-label>
            <a-gui-label id="label4" visible="false" width="3" height="0.6" value="0" font-family="Arial"
                margin="0 0 0.05 0" background-color="#212121" font-color="#FFFFFF">
            </a-gui-label>
            <a-gui-label id="label5" visible="false" width="3" height="0.6" value="0" font-family="Arial"
                margin="0 0 0.05 0" background-color="#212121" font-color="#FFFFFF">
            </a-gui-label>
        </a-gui-flex-container>

        <!-- <a-gui-flex-container id="sound-selector" scale="1 1 0.867" flex-direction="column" justify-content="center" align-items="normal" component-padding="0.01" opacity="0.7" width="3.5" height="4.5" position="-0.3406 3.37254 -7.04354" rotation="0 -3.008028424436822 0">
        <a-gui-label 
            id="label1"
            width="3" height="0.6"
            value="Bump"
            visible ="true"
            font-family="Arial"
            margin="0 0 0.05 0"
            background-color="#212121"
            font-color="#FFFFFF"
        >
        </a-gui-label>
        <a-gui-label 
            id="label2"
            width="3" height="0.6"
            value="Coin"
            visible ="true"
            font-family="Arial"
            margin="0 0 0.05 0"
            background-color="#212121"
            font-color="#FFFFFF"
        >
        </a-gui-label>
        <a-gui-label 
            id="label3"
            visible ="true"
            width="3" height="0.6"
            value="Dead"
            font-family="Arial"
            margin="0 0 0.05 0"
            background-color="#212121"
            font-color="#FFFFFF"
        >
        </a-gui-label>
        <a-gui-label 
            id="label4"
            visible ="true"
            width="3" height="0.6"
            value="Jump"
            font-family="Arial"
            margin="0 0 0.05 0"
            background-color="#212121"
            font-color="#FFFFFF"
        >
        </a-gui-label>
        <a-gui-label 
            id="label5"
            visible ="true"
            width="3" height="0.6"
            value="PIng"
            font-family="Arial"
            margin="0 0 0.05 0"
            background-color="#212121"
            font-color="#FFFFFF"
        >
        </a-gui-label>
        <a-gui-label 
            id="label5"
            visible ="true"
            width="3" height="0.6"
            value="Smash"
            font-family="Arial"
            margin="0 0 0.05 0"
            background-color="#212121"
            font-color="#FFFFFF"
        >
        </a-gui-label>
    </a-gui-flex-container>-->
        <a-gui-icon-button id="next-page" rotation="5.444817927128214 3.0103202556173456 1.636367462893631"
            position="4.46563 5.43386 -4.19296" gui-interactable="keyCode: NaN" height="0.75" class="link"
            onclick="nextPage" icon="ios-arrow-forward" margin="0 0 0.05 0">
        </a-gui-icon-button>
        <a-gui-icon-button id="previous-page" rotation="-4.737215050141646 -12.633719382634652 1.0605448787871536"
            position="2.60038 5.34838 -4.27794" gui-interactable="keyCode: NaN" height="0.75" class="link"
            onclick="prevPage" icon="ios-arrow-back" margin="0 0 0.05 0">
        </a-gui-icon-button>
        <!-- <a-gui-flex-container id="rightmenu" scale="1 1 0.363" flex-direction="column" justify-content="center"
            align-items="normal" component-padding="0.1" opacity="0.7" width="3.5" height="4.5"
            position="3.53378 2.34095 -4.81342" rotation="2.083847500890804 -25.84268839158065 -1.3143651820301083">
            <a-gui-icon-label-button class="link" id="Loopbtn" width="2.5" height="0.5" onclick="showLoopCountDialog"
                icon="loop" value="onclick event" font-family="Arial" margin="0 0 0.05 0">
            </a-gui-icon-label-button>
            <a-gui-icon-label-button class="link" id="Loopbtn" width="2.5" height="0.5" onclick="showLoopCountDialog"
                icon="loop" value="Add sprites" font-family="Arial" margin="0 0 0.05 0">
            </a-gui-icon-label-button>

        </a-gui-flex-container> -->

        <a-gui-flex-container id="nsX" class="number-of-steps" visible="false" scale="1 1 0.867" flex-direction="row"
            justify-content="center" align-items="normal" component-padding="0.01" opacity="0.7" width="3" height="0.7"
            position="-0.42096 3.73287 -6.32403" rotation="9.446928126117013 0.6485882240880919 0.10657014989433312">
            <a-gui-icon-button id="steps-decreaseX" gui-interactable="keyCode: NaN" height="0.4" class="link"
                onclick="decreaseStep('x')" icon="minus" margin="0 0 0.05 0">
            </a-gui-icon-button>
            <a-gui-label id="steps-labelX" width="1" height="0.6" value="0" font-family="Arial" margin="0 0 0.05 0"
                background-color="#212121" font-color="#FFFFFF">
            </a-gui-label>
            <a-gui-icon-button id="steps-increaseX" height="0.4" class="link" onclick="increaseStep('x')"
                icon="android-add" margin="0 0 0.05 0">
            </a-gui-icon-button>
        </a-gui-flex-container>
        <a-gui-flex-container id="nsY" class="number-of-steps" visible="false" scale="1 1 0.867" flex-direction="row"
            justify-content="center" align-items="normal" component-padding="0.01" opacity="0.7" width="3" height="0.7"
            position="-0.42096 2.93298 -6.32403" rotation="9.446928126117013 0.6485882240880919 0.10657014989433312">
            <a-gui-icon-button id="steps-decreaseY" gui-interactable="keyCode: NaN" height="0.4" class="link"
                onclick="decreaseStep('y')" icon="minus" margin="0 0 0.05 0">
            </a-gui-icon-button>
            <a-gui-label id="steps-labelY" width="1" height="0.6" value="0" font-family="Arial" margin="0 0 0.05 0"
                background-color="#212121" font-color="#FFFFFF">
            </a-gui-label>
            <a-gui-icon-button id="steps-increaseY" height="0.4" class="link" onclick="increaseStep('y')"
                icon="android-add" margin="0 0 0.05 0">
            </a-gui-icon-button>
        </a-gui-flex-container>
        <a-gui-flex-container id="nsZ" class="number-of-steps" visible="false" scale="1 1 0.867" flex-direction="row"
            justify-content="center" align-items="normal" component-padding="0.01" opacity="0.7" width="3" height="0.7"
            position="-0.42096 2.12467 -6.32403" rotation="9.446928126117013 0.6485882240880919 0.10657014989433312">
            <a-gui-icon-button id="steps-decreasZ" gui-interactable="keyCode: NaN" height="0.4" class="link"
                onclick="decreaseStep('z')" icon="minus" margin="0 0 0.05 0">
            </a-gui-icon-button>
            <a-gui-label id="steps-labelZ" width="1" height="0.6" value="0" font-family="Arial" margin="0 0 0.05 0"
                background-color="#212121" font-color="#FFFFFF">
            </a-gui-label>
            <a-gui-icon-button id="steps-increaseZ" height="0.4" class="link" onclick="increaseStep('z')"
                icon="android-add" margin="0 0 0.05 0">
            </a-gui-icon-button>
        </a-gui-flex-container>

        <a-gui-flex-container id="loop-times" visible="false" scale="1 1 0.867" flex-direction="row"
            justify-content="center" align-items="normal" component-padding="0.01" opacity="0.7" width="3" height="0.7"
            position="-0.42096 5.27567 -6.2" rotation="9.446928126117013 0.6485882240880919 0.10657014989433312">
            <a-gui-icon-button id="loop-decrease" gui-interactable="keyCode: NaN" height="0.6" class="link"
                onclick="decreaseLoopCount" icon="minus" margin="0 0 0.05 0">
            </a-gui-icon-button>
            <a-gui-label id="loop-label" width="1" height="0.6" value="0" font-family="Arial" margin="0 0 0.05 0"
                background-color="#212121" font-color="#FFFFFF">
            </a-gui-label>
            <a-gui-icon-button id="loop-increase" height="0.6" class="link" onclick="increaseLoopCount" icon="android-add"
                margin="0 0 0.05 0">
            </a-gui-icon-button>
        </a-gui-flex-container>
        <a-gui-button onclick="DoneStepDialog()" visible="false" class="link" id="countokbutton" scale="0.74 0.75 0.93"
            position="-0.42364 1.38686 -6.38707" width="1.5" height="1" key-code="32" value="OK" font-family="Arial"
            margin="0 0 0.05 0">
        </a-gui-button>
        <a-gui-button onclick="submitLoopCountDialog()" visible="false" class="link" id="loopokbutton"
            scale="0.43339 0.58201 1" position="-0.42364 4.50531 -6.26746" width="1.5" height="1" key-code="32"
            value="OK" font-family="Arial" margin="0 0 0.05 0">

        </a-gui-button>
        <!-- <a-entity id="camera" camera look-controls>
            <a-cursor id="cursor" fuse="false"
                animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
                event-set__mouseenter="_event: mouseenter; color: springgreen"
                event-set__mouseleave="_event: mouseleave; color: black" raycaster="objects: .link"></a-cursor>
        </a-entity> -->
        <a-entity id="mainlight" position="0.01246 -0.2125 3.15099" light></a-entity>
        <a-entity id="cameraRig" rotation="0 -0.132926208470351 0" position="0.02902 0.43866 0">
            <a-camera look-controls wasd-controls position="0 0 0">
                <a-entity id="talkbox" text="" position="0.1 -0.7 -1.4">abc</a-entity>
                <a-entity id="scorebox" text="value: Score=0" position="0.1 0.9 -1.4"></a-entity>
                <a-gui-cursor id="cursor" raycaster="objects: .link" fuse="true" fuse-timeout="2000" design="ring"
                    distance="-1">
                </a-gui-cursor> <!-- /cursor -->
            </a-camera> <!-- /camera -->
        </a-entity>
    </a-scene>
    <script>
        window.PROGRAM = [];
        window.LOOP_STACK = [];
        window.LOOP_NUM = 0;
        window.SCORE = 0;
        function MoveAnimation(x, y, z) {
            return {
                "elm": document.querySelector("#fox"),
                "action": function () {
                    m = this.elm.getAttribute("position");
                    console.log("moving to " + (m.x + this.x * 0.1) + " " + (m.y + this.y * 0.1) + " " + (m.z + this.z * 0.1));
                    this.elm.setAttribute("animation", "property: position; to: " + (m.x + this.x * 0.1) + " " +
                        (m.y + this.y * 0.1) + " " + (m.z + this.z * 0.1) + "; dur: 1500; easing: linear");
                },
                "x": x,
                "y": y,
                "z": z,
                "type": "move"
            };
            //stmt1.elm = document.querySelector("#box2");
            //stmt1.action =
            //    stmt1.type = "move";
            //stmt1.x = x;
            //stmt1.y = y;
            //stmt1.z = z;
            //return stmt1;
        }
        /*window.PROGRAM.push({
            "elm": document.querySelector("#fox"),
            "action": function () {
                //console.log("moving to " + x + " " + y + " " + z);
                document.querySelector("#fox").object3D.position.x = -0.01093;
                document.querySelector("#fox").object3D.position.y = 0;
                document.querySelector("#fox").object3D.position.z = -5.79363;
                document.querySelector("#fox").object3D.rotation.x = 0;
                document.querySelector("#fox").object3D.rotation.y = 0;
                document.querySelector("#fox").object3D.rotation.z = 0;
                document.querySelector("#fox").object3D.scale.x = 0.2;
                document.querySelector("#fox").object3D.scale.y = 0.2;
                document.querySelector("#fox").object3D.scale.z = 0.2;
                this.elm.setAttribute("animation", "property: position; to: -0.01093 0 -5.79363 ; dur: 500; easing: linear");
                + (m.x + this.x * 0.1) + " " +
                    (m.y + this.y * 0.1) + " " + (m.z + this.z * 0.1) +
                    + (m.x + this.x * 0.1) + " " +
                    (m.y + this.y * 0.1) + " " + (m.z + this.z * 0.1) +
                    + (m.x + this.x * 0.1) + " " +
                    (m.y + this.y * 0.1) + " " + (m.z + this.z * 0.1) +
                    "z": 0,
                        "type": "move"
            }, {
            "elm": document.querySelector("#fox"),
            "action": function () {
                //console.log("rotating to " + x + " " + y + " " + z);
                this.elm.setAttribute("animation", "property: rotation; to: 0 0 0  ; dur: 500; easing: linear");
            },
            "x": 0,
            "y": 0,
            "z": 0,
            "type": "rotate"
        },
            {
                "elm": document.querySelector("#fox"),
                "action": function () {
                    //console.log("scaling to " + x + " " + y + " " + z);
                    this.elm.setAttribute("animation", "property: scale; to: 0.2 0.2 0.2 ; dur: 500; easing: linear");
                },
                "x": 0,
                "y": 0,
                "z": 0,
                "type": "scale"
            }window.PROGRAM
        );*/

        function RotateAnimation(x, y, z) {
            return {
                "elm": document.querySelector("#fox"),
                "action": function () {
                    m = this.elm.getAttribute("rotation");
                    console.log("rotating to " + (m.x + this.x * 2.8) + " " + (m.y + this.y * 2.8) + " " + (m.z + this.z * 2.8));
                    this.elm.setAttribute("animation", "property: rotation; to: " + (m.x + this.x * 2.8) + " " +
                        (m.y + this.y * 2.8) + " " + (m.z + this.z * 2.8) + " ; dur: 1500; easing: linear;");
                },
                "x": x,
                "y": y,
                "z": z,
                "type": "rotate"
            };
            /*stmt2.action = function () {
                console.log("rotating to " + x + " " + y + " " + z);
                this.elm.setAttribute("animation", "property: rotation; to: " + stmt2.x + " " +
                    stmt2.y + " " + stmt2.z + " ; dur: 1500; easing: linear");
            }
            stmt2.type = "rotate";
            stmt2.x = x;
            stmt2.y = y;
            stmt2.z = z;
            stmt2.elm = document.querySelector("#box2");
            return stmt2; */
        }

        function ScaleAnimation(x, y, z) {
            return {
                "elm": document.querySelector("#fox"),
                "action": function () {
                    m = this.elm.getAttribute("scale");
                    console.log("scaling to " + x + " " + y + " " + z);
                    this.elm.setAttribute("animation", "property: scale; to: " + (m.x + this.x * 0.1) + " " +
                        (m.y + this.y * 0.1) + " " + (m.z + this.z * 0.1) + " ; dur: 1500; easing: linear");
                },
                "x": x,
                "y": y,
                "z": z,
                "type": "scale"
            };


            //stmt3 = {};
            //stmt3.action = function () {
            //   console.log("scaling to " + x + " " + y + " " + z);
            //scoreboxale; to: " + stmt3.x + " " +
            //scoreboxng: linear");
            //scorebox
            //stmt3.type = "scale";
            //stmt3.x = x;
            //stmt3.y = y;
            //stmt3.z = z;
            //stmt3.elm = document.querySelector("#box2");
            //return stmt3;
        }

        //Increase Score
        function PlaySound() {
            return {
                "action": function () {
                    playSound("dead", { volume: 0.6 });
                },
                "type": "sound"
            };
        }

        function SleepDelay() {
            return {
                "type": "sleep",
                "interval": 3000
            };
        }

        function AddLoop(times) {
            window.LOOP_STACK.push(window.LOOP_NUM);
            return {
                "action": function () {
                    console.log("loop");
                },
                "type": "loop",
                "loop_num": window.LOOP_NUM++,
                "times": times,
            };
        }

        function AddEndLoop() {
            return {
                "action": function () {
                    console.log("loop");
                },
                "type": "endloop",
                "loop_num": window.LOOP_STACK.pop()
            };
        }

        function Talk(txt) {
            return {
                "action": function () {
                    var e = document.querySelector("#talkbox");
                    e.setAttribute("text", "font:https://cdn.aframe.io/fonts/mozillavr.fnt; value: " + txt);
                    //Fox: Hellow world! adadasdsadad Anubhav Dinesh Patel")
                    window.setTimeout(function () { document.querySelector("#talkbox").setAttribute("text", "font:https://cdn.aframe.io/fonts/mozillavr.fnt; value: "); }, 4000);
                },
                "type": "talk"
            };
        }

        function changeVar() {
            return {
                "action": function () {
                    console.log("changed score.");
                    window.SCORE += this.by;
                    document.getElementById("scorebox").setAttribute("text", "value: Score=" + window.SCORE);
                },
                "type": "change score",
                "by": 1
            };
        }

        function addOnClick() {
            return {
                "action": function () { },
                "type": "onclick",
                "anim": {}
            };
        }

        function addAction(type, vals) {

        }
        //// code        stmt1.elm = document.querySelector("#box2");
        /*
        stmt2 = {};
        stmt2.action = function () {
            this.elm.setAttribute("animation", "property: rotation; to: " + stmt2.x * 1 + " " +
                stmt2.y * 1 + " " + stmt2.z * 1 + " ; dur: 1500; easing: linear");
        }
        stmt2.type = "rotate";
        stmt2.x = 30;
        stmt2.y = 30;
        stmt2.z = 50;
        stmt2.elm = document.querySelector("#box2");

        stmt3 = {};
        stmt3.action = function () {
            function sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }            //this.elm.setAttribute("animation", "property: scale; to: " + stmt3.x * 0.01 + " " +
            //    stmt3.y * 0.01 + " " + stmt3.z * 0.01 + " ; dur: 1500; easing: linear");
        }
        stmt3.type = "scale";
        stmt3.x = 0.5;
        stmt3.y = 0.5;
        stmt3.z = 0.5;
        stmt3.elm = document.querySelector("#box2");
        */
        /*stmt4 = {};
        stmt4.action = function () {
            console.log("loop");
        }
        stmt4.type = "loop";
        stmt4.loop_num = 1;
        stmt4.times = 5;

        stmt5 = {};
        stmt5.action = function () {
            console.log("endloop");
        }
        stmt5.type = "endloop";
        stmt5.loop_num = 1;
        stmt5.times = 5;*/
        //animation = "property: position; to: 5 1.6 0; dur: 1500; easing: linear"
        //program = [stmt1, stmt2, stmt3, stmt4, stmt2, stmt3, stmt5];
        //program = [MoveAnimation(1.6, 1.3, 2.4), RotateAnimation(30, 30, 30), Talk("Anubhav!"),
        //ScaleAnimation(1.6, 1.3, 1.4), RotateAnimation(120, 120, 120), RotateAnimation(90, 90, 90)];

        class Interpreter {
            run(program) {
                //program = p.slice();
                var loop_map = new Map();
                var idx = 0;
                var dd = 0;
                document.querySelector("#fox").object3D.position.x = -0.01093;
                document.querySelector("#fox").object3D.position.y = 0;
                document.querySelector("#fox").object3D.position.z = -5.79363;
                document.querySelector("#fox").object3D.rotation.x = 0;
                document.querySelector("#fox").object3D.rotation.y = 0;
                document.querySelector("#fox").object3D.rotation.z = 0;
                document.querySelector("#fox").object3D.scale.x = 0.2;
                document.querySelector("#fox").object3D.scale.y = 0.2;
                document.querySelector("#fox").object3D.scale.z = 0.2;
                document.querySelector("#fox").removeAttribute("animation");
                // program[0].action();
                //program[1].action();
                //program[2].action();
                // copy program array to local stg
                idx = 0;
                while (idx < program.length) {
                    dd += 2000;
                    if (program[idx].type == 'sleep') {
                        dd += program[idx].interval;
                    }
                    window.setTimeout(function (idx) {
                        console.log("idx = " + idx);
                        if ('action' in program[idx]) {
                            program[idx].action();
                        }
                    }, dd, idx);
                    if ('loop_num' in program[idx]) {
                        if (program[idx].type == 'loop')
                            loop_map.set(program[idx].loop_num, idx);
                        else {
                            //program[idx].times--;
                            program[loop_map.get(program[idx].loop_num)].times--;
                            console.log("times is " + program[loop_map.get(program[idx].loop_num)].times);
                            if (program[loop_map.get(program[idx].loop_num)].times > 0) {
                                idx = loop_map.get(program[idx].loop_num);
                            }
                        }
                    }
                    if (program[idx].type == "talk") {
                        dd += 3000;
                    }
                    idx++;
                }
            }
        }

        var intpr = new Interpreter();
        function play() {
            console.log(window.PROGRAM);
            intpr.run(window.PROGRAM);
        }

        function render() {
            var el = document.querySelector("#box2");
            el.setAttribute("animation", "property: position; to: -0.6 1.5 0; dur: 1500; easing: linear");
            window.setTimeout(function () {
                el.setAttribute("animation", "property: position; to: -0.6 2.5 0; dur: 1500; easing: linear");
            }, 5000);
        }
        //render();
    </script>
</body>

</html>